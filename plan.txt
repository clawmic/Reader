Clawmic Reader 開發計畫
======================

專案目標
--------
- 建立適合手機與平板閱讀的電子書漫畫網頁閱讀器。
- 英文名稱：Clawmic Reader；中文名稱：克勞漫閱讀器。
- 功能體驗參考 Kindle Cloud Reader，視覺風格參考 openclaw.ai.png。
- 站內內容限定為 openClaw 相關漫畫。
- 此靜態網站部署於 GitHub Pages（repository pages）。

已知資料基礎
------------
- `comic_db.json`：每本漫畫包含 `issue_id`、中英標題、作者、日期、介紹文、外部連結、縮圖、分語系頁面陣列（`comics_en/comics_ch`）。
- `comic_db.json` 結構已修正，可直接作為前端靜態資料來源。
- 目前 `issue_id` 與圖檔命名已一致（`issue0`、`issue1`），可依規則化路徑直接映射資源。

產品與體驗規劃
--------------
1. 資訊架構
   - Library（書庫）頁：漫畫卡片列表、封面縮圖、語系標籤、作者與日期。
   - Reader（閱讀）頁：全螢幕閱讀、頁碼與進度、快速回書庫。
   - Issue 詳情區：顯示中英簡介、外部連結（原文來源）。
   - Settings：語系、閱讀方向、顯示偏好。

2. 核心閱讀功能（Kindle Cloud Reader 參考）
   - 左右滑動翻頁（觸控優先）、點擊左右區域翻頁。
   - 頁面預載（前後頁）以降低翻頁等待。
   - 閱讀進度顯示與續讀（記錄最後閱讀的 issue/page）。
   - 支援放大縮小與平移（漫畫細節閱讀）。

3. 行動裝置優先 UI（openclaw.ai 風格）
   - 風格請參考 openclaw.ai.png。
   - 手機優先（單欄）並延伸到平板（雙欄或更寬卡片網格）。
   - 統一字體層級、間距系統與色彩 token，確保一致性。

技術決策（GitHub Pages）
-----------------------
- 採純前端靜態架構：`index.html` + `assets` + `comic_db.json` + `img/` + `thumbnail/`。
- 路由策略以 hash routing（`#/library`, `#/reader/:issueId/:page`）避免 GitHub Pages 重新整理 404。
- 部署方式：push 到 `main` 後由 GitHub Actions 部署至 Pages（來源為 repository root 或 build 輸出資料夾）。
- 路徑策略明確化：若為 project pages（`username.github.io/repo`），以前端 `BASE_PATH` 統一處理 `comic_db.json`、圖片與資源路徑，避免子路徑 404。
- 品質檢查明確化：以 `npm run lint`、`npm run build`、`npm run test`（若有）作為發佈前 gate；若無 Node toolchain，改用專案內既有檢查指令並於 README 明列。
- 離線快取策略明確化：使用 Service Worker，cache key 採版本號（如 `clawmic-v1`）；每次發版遞增版本並在 activate 階段刪除舊 cache；`index.html` 採 network-first（或不快取 HTML），僅對靜態資源採 cache-first，避免殼層陳舊。

技術實作計畫（分階段）
--------------------
Phase 1: 專案骨架與資料層
- 建立前端專案結構（頁面、元件、狀態管理、資源路徑管理）。
- 實作 `comic_db.json` 載入器與資料正規化（中英欄位、圖片路徑映射）。
- 實作錯誤處理（缺圖、欄位缺漏、映射失敗時提供可見提示）。

Phase 2: 書庫與導覽
- 完成 Library 卡片列表（中英標題切換、縮圖、作者、日期）。
- 加入搜尋/篩選（至少依語系與 issue）。
- 建立 URL 路由（`#/library`、`#/reader/:issueId`），支援直接進入指定期數。

Phase 3: 閱讀器核心
- 完成漫畫頁面渲染、翻頁手勢與點擊區翻頁。
- 加入頁面預載策略（current ±1）及載入中狀態。
- 顯示進度（目前頁/總頁）與返回書庫捷徑。

Phase 4: 偏好與續讀
- LocalStorage 儲存：語系、最後閱讀位置、顯示偏好。
- 啟動時自動恢復上次閱讀位置；可手動重設。
- 加入基本離線快取策略（靜態資源/近期頁面）。

Phase 5: 品質強化與上線準備
- 響應式驗證：主流手機與平板直/橫向。
- 無障礙：鍵盤操作、焦點可見性、圖片替代文字與語意標記。
- 效能：圖片延遲載入、快取策略、避免阻塞渲染。
- 執行既有 lint/build/test，並以 GitHub Actions + GitHub Pages 完成發佈前檢查與部署流程驗證。

驗收標準
--------
- 在手機與平板上可流暢瀏覽書庫、進入閱讀、翻頁、續讀。
- 中英文內容切換正確，所有 `issue` 的縮圖與頁面可被正確映射與載入。
- UI 視覺符合 openclaw.ai 風格方向，且主要互動接近 Kindle Cloud Reader。
- 既有檢查（lint/build/test）通過，無阻斷性錯誤。
